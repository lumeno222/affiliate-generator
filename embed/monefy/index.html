<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Modeno - Affiliate Link Generator (isoliert)</title>
</head>
<body>
<script>
(function(){
  var host = document.createElement('div');
  host.id = 'modeno-host-' + Math.random().toString(36).slice(2,9);
  document.body.innerHTML = '';
  document.body.appendChild(host);
  var shadow = host.attachShadow({mode:'open'});

  var style = document.createElement('style');
  style.textContent = `
    :host{display:block}
    .wrapper{max-width:720px;margin:36px auto;padding:0 16px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial;color:#3a3a3a}
    .card{background:#fff;border-radius:18px;box-shadow:0 6px 18px rgba(0,0,0,.03);overflow:hidden}
    .header{background:linear-gradient(135deg,#d4a574,#b8885a);padding:34px 28px;color:#fff}
    .header h1{margin:0;font-size:22px}
    .header p{margin:6px 0 0;opacity:.95}
    .body{padding:30px}
    .label{display:block;margin-bottom:8px;font-weight:700;font-size:13px;text-transform:uppercase;letter-spacing:.6px}
    .input{width:100%;padding:14px 16px;border:2px solid #e8dcc8;border-radius:10px;background:#fafafa;font-size:15px;outline:none}
    .button{display:block;width:100%;padding:16px;border-radius:10px;border:0;background:linear-gradient(135deg,#d4a574,#b8885a);color:#fff;font-weight:700;text-transform:uppercase;cursor:pointer}
    .result{margin-top:16px;padding:14px;border-radius:10px;border:2px dashed #d4a574;background:#fbfbfb;display:none}
    .result a{color:#d4a574;word-break:break-all;font-weight:700;text-decoration:none}
    .error{color:#e74c3c;margin-top:8px;display:none}
    .small{font-size:13px;color:#666;margin-bottom:8px}
  `;

  var wrapper = document.createElement('div');
  wrapper.className = 'wrapper';
  wrapper.innerHTML = `
    <div class="card" role="application" aria-label="Modeno Affiliate Link Generator">
      <div class="header"><h1>Modeno Link Generator</h1><p>Erstelle deinen persönlichen Affiliate-Link</p></div>
      <div class="body">
        <label class="label" for="modeno_id">Deine Digistore-ID</label>
        <input id="modeno_id" class="input" type="text" placeholder="z.B. maxmustermann23" autocomplete="off" />
        <div id="modeno_err" class="error">Bitte gib eine gültige ID ein (Buchstaben, Zahlen, - oder _).</div>
        <button id="modeno_btn" class="button" type="button">Generieren</button>
        <div id="modeno_result" class="result" role="status" aria-live="polite">
          <div class="small">Dein Affiliate-Link:</div>
          <a id="modeno_link" href="#" target="_blank" rel="noopener noreferrer"></a>
        </div>
      </div>
    </div>
  `;

  shadow.appendChild(style);
  shadow.appendChild(wrapper);

  var inEl = shadow.getElementById('modeno_id');
  var btn = shadow.getElementById('modeno_btn');
  var err = shadow.getElementById('modeno_err');
  var result = shadow.getElementById('modeno_result');
  var link = shadow.getElementById('modeno_link');

  function valid(v){
    if(!v) return false;
    v = String(v).trim();
    if(v.length === 0 || v.length > 50) return false;
    return /^[A-Za-z0-9\-_]+$/.test(v);
  }

  btn.addEventListener('click', function(){
    var v = inEl.value;
    if(!valid(v)){ err.style.display='block'; result.style.display='none'; return; }
    err.style.display='none';
    var url = 'https://www.modeno.biz/startseite/?aff=' + encodeURIComponent(v);
    link.textContent = url;
    link.href = url;
    result.style.display = 'block';
  });

  inEl.addEventListener('keydown', function(e){ if(e.key === 'Enter'){ e.preventDefault(); btn.click(); } });

  var observer = new MutationObserver(function(){
    if(!document.body.contains(host)){
      document.body.appendChild(host);
    }
  });
  observer.observe(document.documentElement, {childList:true, subtree:true});
})();
</script>
</body>
</html>
